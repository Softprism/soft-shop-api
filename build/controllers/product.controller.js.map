{"version":3,"sources":["../../src/controllers/product.controller.js"],"names":["getProducts","req","res","next","console","log","query","skip","undefined","limit","status","json","success","msg","productService","allProducts","err","length","result","createProduct","store","storeID","id","admin","errors","isEmpty","error_msgs","array","forEach","element","body","product","updateProduct","params","request","deleteProduct","reviewProduct","newReview","getProductDetails","productId","productDetails","createVariant","updateVariant","variantId","addVariantItem","getVariantItem","addCustomFee","deleteCustomFee","customFeeId"],"mappings":"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","sourcesContent":["import express from \"express\";\r\nimport * as productService from \"../services/product.service.js\";\r\nimport { auth } from \"../middleware/auth.js\";\r\nimport { check, validationResult } from \"express-validator\";\r\n\r\nconst getProducts = async (req, res, next) => {\r\n  console.log(1234);\r\n  if (req.query.skip === undefined || req.query.limit === undefined) {\r\n    res\r\n      .status(400)\r\n      .json({ success: false, msg: \"filtering parameters are missing\" });\r\n  }\r\n\r\n  const allProducts = await productService.getProducts(req.query);\r\n\r\n  if (allProducts.err) {\r\n    res.status(400).json({ success: false, msg: allProducts.err });\r\n  }\r\n\r\n  allProducts && allProducts.length > 0\r\n    ? res.status(200).json({ success: true, result: allProducts })\r\n    : res.status(404).json({ success: false, msg: \"No product found\" });\r\n};\r\n\r\nconst createProduct = async (req, res, next) => {\r\n  let storeID; // container to store the store's ID, be it a store request or an admin request\r\n\r\n  if (req.store === undefined && req.query.storeID === undefined) {\r\n    res\r\n      .status(400)\r\n      .json({ success: false, msg: \"unable to authenticate this store\" });\r\n  }\r\n\r\n  if (req.store) storeID = req.store.id;\r\n  if (req.query.storeID && req.admin) storeID = req.query.storeID;\r\n\r\n  const errors = validationResult(req);\r\n\r\n  if (!errors.isEmpty()) {\r\n    let error_msgs = [];\r\n    errors.array().forEach((element) => {\r\n      error_msgs = [...error_msgs, element.msg];\r\n    });\r\n\r\n    return res.status(400).json({ success: false, msg: error_msgs });\r\n  }\r\n\r\n  const product = await productService.createProduct(req.body, storeID);\r\n\r\n  product.err\r\n    ? res.status(409).json({ success: false, msg: product.err })\r\n    : res.status(201).json({ success: true, result: product });\r\n};\r\n\r\nconst updateProduct = async (req, res, next) => {\r\n  const errors = validationResult(req);\r\n\r\n  if (!errors.isEmpty()) {\r\n    res.status(400).json({\r\n      success: false,\r\n      errors: errors.array()[\"msg\"],\r\n    });\r\n  }\r\n\r\n  let storeID; // container to store the store's ID, be it a store request or an admin request\r\n  if (req.store === undefined && req.query.storeID === undefined) {\r\n    res\r\n      .status(400)\r\n      .json({ success: false, msg: \"unable to authenticate this store\" });\r\n  }\r\n\r\n  if (req.store) storeID = req.store.id;\r\n  if (req.query.storeID && req.admin) storeID = req.query.storeID;\r\n\r\n  const request = await productService.updateProduct(\r\n    req.body,\r\n    req.params.id,\r\n    storeID\r\n  );\r\n  request.err\r\n    ? res.status(400).json({ success: false, msg: request.err })\r\n    : res.status(200).json({ success: true, result: request });\r\n};\r\n\r\nconst deleteProduct = async (req, res, next) => {\r\n  let storeID;\r\n  if (req.store === undefined && req.query.storeID === undefined) {\r\n    res\r\n      .status(400)\r\n      .json({ success: false, msg: \"unable to authenticate this store\" });\r\n  }\r\n\r\n  if (req.store) storeID = req.store.id;\r\n\r\n  if (req.query.storeID && req.admin) storeID = req.query.storeID;\r\n\r\n  const product = await productService.deleteProduct(req.params.id, storeID);\r\n\r\n  product.err\r\n    ? res.status(404).json({ success: false, msg: product.err })\r\n    : res.status(201).json({ success: true, result: product.msg });\r\n};\r\n\r\nconst reviewProduct = async (req, res, next) => {\r\n  if (req.store) {\r\n    return res\r\n      .status(400)\r\n      .json({ success: false, msg: \"action not allowed by store\" });\r\n  }\r\n  const newReview = await productService.reviewProduct(req.body);\r\n\r\n  if (newReview.err) {\r\n    return res.status(400).json({ success: false, msg: newReview.err });\r\n  }\r\n\r\n  res.status(200).json({ success: true, result: newReview });\r\n};\r\n\r\nconst getProductDetails = async (req, res, next) => {\r\n  console.log(req.params);\r\n  const productDetails = await productService.getProductDetails(\r\n    req.params.productId\r\n  );\r\n\r\n  if (productDetails.err) {\r\n    return res.status(400).json({ success: false, msg: productDetails.err });\r\n  }\r\n\r\n  res.status(200).json({ success: true, result: productDetails });\r\n};\r\n\r\nconst createVariant = async (req, res, next) => {\r\n  // verifiy permission\r\n  if (req.admin === undefined && req.store === undefined)\r\n    return res.status(403).json({\r\n      success: false,\r\n      msg: \"You're not permitted to carry out this action\",\r\n    });\r\n\r\n  let storeID;\r\n\r\n  if (req.store === undefined && req.query.storeID === undefined) {\r\n    res\r\n      .status(400)\r\n      .json({ success: false, msg: \"unable to authenticate this store\" });\r\n  }\r\n  if (req.store) storeID = req.store.id;\r\n  if (req.query.storeID && req.admin) storeID = req.query.storeID;\r\n\r\n  const createVariant = await productService.createVariant(storeID, req.body);\r\n  if (createVariant.err) {\r\n    res.status(500).json({ success: false, msg: createVariant.err });\r\n  } else {\r\n    res.status(200).json({ success: true, result: createVariant });\r\n  }\r\n};\r\n\r\nconst updateVariant = async (req, res, next) => {\r\n  // verifiy permission\r\n  if (req.admin === undefined && req.store === undefined)\r\n    return res.status(403).json({\r\n      success: false,\r\n      msg: \"You're not permitted to carry out this action\",\r\n    });\r\n\r\n  let storeID;\r\n\r\n  if (req.store === undefined && req.query.storeID === undefined) {\r\n    res\r\n      .status(400)\r\n      .json({ success: false, msg: \"unable to authenticate this store\" });\r\n  }\r\n  if (req.store) storeID = req.store.id;\r\n  if (req.query.storeID && req.admin) storeID = req.query.storeID;\r\n\r\n  const updateVariant = await productService.updateVariant(\r\n    req.params.variantId,\r\n    req.body\r\n  );\r\n\r\n  if (updateVariant.err) {\r\n    console.log(\"error\");\r\n    res.status(500).json({ success: false, msg: updateVariant.err });\r\n  } else {\r\n    console.log(\"no error\");\r\n    res.status(200).json({ success: true, result: updateVariant });\r\n  }\r\n};\r\n\r\nconst addVariantItem = async (req, res, next) => {\r\n  // verifiy permission\r\n  if (req.admin === undefined && req.store === undefined)\r\n    return res.status(403).json({\r\n      success: false,\r\n      msg: \"You're not permitted to carry out this action\",\r\n    });\r\n\r\n  if (req.store === undefined && req.query.storeID === undefined) {\r\n    res\r\n      .status(400)\r\n      .json({ success: false, msg: \"unable to authenticate this store\" });\r\n  }\r\n\r\n  let storeID;\r\n  if (req.store) storeID = req.store.id;\r\n  if (req.query.storeID && req.admin) storeID = req.query.storeID;\r\n\r\n  const addVariantItem = await productService.addVariantItem(\r\n    req.params.variantId,\r\n    req.body\r\n  );\r\n\r\n  if (addVariantItem.err) {\r\n    console.log(\"error\");\r\n    res.status(500).json({ success: false, msg: addVariantItem.err });\r\n  } else {\r\n    console.log(\"no error\");\r\n    res.status(200).json({ success: true, result: addVariantItem });\r\n  }\r\n};\r\n\r\nconst getVariantItem = async (req, res, next) => {\r\n  // verifiy permission\r\n  if (req.admin === undefined && req.store === undefined)\r\n    return res.status(403).json({\r\n      success: false,\r\n      msg: \"You're not permitted to carry out this action\",\r\n    });\r\n\r\n  if (req.store === undefined && req.query.storeID === undefined) {\r\n    res\r\n      .status(400)\r\n      .json({ success: false, msg: \"unable to authenticate this store\" });\r\n  }\r\n\r\n  let storeID;\r\n  if (req.store) storeID = req.store.id;\r\n  if (req.query.storeID && req.admin) storeID = req.query.storeID;\r\n\r\n  const getVariantItem = await productService.getVariantItem(\r\n    req.params.variantId\r\n  );\r\n\r\n  if (getVariantItem.err) {\r\n    res.status(500).json({ success: false, msg: getVariantItem.err });\r\n  } else {\r\n    res.status(200).json({ success: true, result: getVariantItem });\r\n  }\r\n};\r\n\r\nconst addCustomFee = async (req, res, next) => {\r\n  // verifiy permission\r\n  if (req.admin === undefined && req.store === undefined)\r\n    return res.status(403).json({\r\n      success: false,\r\n      msg: \"You're not permitted to carry out this action\",\r\n    });\r\n\r\n  let storeID;\r\n\r\n  if (req.store === undefined && req.query.storeID === undefined) {\r\n    res\r\n      .status(400)\r\n      .json({ success: false, msg: \"unable to authenticate this store\" });\r\n  }\r\n  if (req.store) storeID = req.store.id;\r\n  if (req.query.storeID && req.admin) storeID = req.query.storeID;\r\n\r\n  const addCustomFee = await productService.addCustomFee(storeID, req.body);\r\n  if (addCustomFee.err) {\r\n    res.status(500).json({ success: false, msg: addCustomFee.err });\r\n  } else {\r\n    res.status(200).json({ success: true, result: addCustomFee });\r\n  }\r\n};\r\n\r\nconst deleteCustomFee = async (req, res, next) => {\r\n  // verifiy permission\r\n  if (req.admin === undefined && req.store === undefined)\r\n    return res.status(403).json({\r\n      success: false,\r\n      msg: \"You're not permitted to carry out this action\",\r\n    });\r\n\r\n  let storeID;\r\n\r\n  if (req.store === undefined && req.query.storeID === undefined) {\r\n    res\r\n      .status(400)\r\n      .json({ success: false, msg: \"unable to authenticate this store\" });\r\n  }\r\n  if (req.store) storeID = req.store.id;\r\n  if (req.query.storeID && req.admin) storeID = req.query.storeID;\r\n\r\n  const deleteCustomFee = await productService.deleteCustomFee(\r\n    req.params.customFeeId\r\n  );\r\n  if (deleteCustomFee.err) {\r\n    res.status(500).json({ success: false, msg: deleteCustomFee.err });\r\n  } else {\r\n    res.status(200).json({ success: true, result: deleteCustomFee });\r\n  }\r\n};\r\nexport {\r\n  deleteProduct,\r\n  updateProduct,\r\n  createProduct,\r\n  getProducts,\r\n  getProductDetails,\r\n  reviewProduct,\r\n  createVariant,\r\n  updateVariant,\r\n  addVariantItem,\r\n  getVariantItem,\r\n  addCustomFee,\r\n  deleteCustomFee,\r\n};\r\n"],"file":"product.controller.js"}